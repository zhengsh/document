# 系统架构

## 软件架构概念

架构将设计就是需求分配，即将满足需求的职责分配到组件上。

### 软件架构概念-软件架构模型

* 逻辑视图 （**功能**）
  最终用户：功能需求 （UML: 逻辑视图）

* 开发视图 (**源代码结构**)
  编程人员：软件管理（URL：实现视图）

* 进程视图 （**并发**）
  系统集成人员：性能可拓充性，吞吐量等（URL：进程视图）

* 物理视图 （**软件与硬件之间的映射**）
  系统工程人员：系统拓扑，安装，通讯等（URL：部署视图）

* 场景 （UML: 用例视图）


## 架构描述语言（ADL）

体系描述语言（architecture description language, 简称 ADL），支持：构件、连接子及其配置的描述语言。

## 软件架构风格

* 数据流风格（ETL）：
**典型特征：对数据进行处理分阶段、请一个阶段的结果，作为下一个阶段的输入**
  批处理序列(**数据必须是完整的，以整体的方式传递**)，
  管道-过滤器(**早期编译器就是采用这种架构，要一步一步处理的，均可考虑采用此架构风格**)
区别：批处理强调数据必须完整。
* 调用/返回风格：（MVC 、 C/S、 B/S、网络七层模型）
  * 主程序/子程序
  * 面向对象
  * 层次结构
* 独立构件风格：进程通讯、事件驱动系统（隐式调用）
* 虚拟机风格：解释器、基于规则的系统
* 仓库风格(**以数据为中心**)：
  * 数据库系统、超文本系统、黑板系统， 注册表


### 软件架构风格-数据流风格 （用户交互方面更弱）
* 批处理序列 （**早期的编译器**）
  **对数据库惊醒处理，并分阶段，前一阶段的结果，作为本步骤的输入**
  数据必须**完整**的，以整体的方式传输。

* 管道-过滤器 （**早期的编译器**）
  早起编译器就是采用这种风格，要一步一步的处理，均可考虑采用此架构风格。

### 软件架构风格-调用/返回风格

* 主程序/子程序
* 面向对象
* 层次结构
  构件组织成一个层次结构，连接件通过决定层间如何交互的协议来定义。每层为上一层提供服务，
使用下一层的服务，只能看到自己临接的层。通过层次结构，可以将大的问题分解为若干个逐渐的小问题逐步解决，
可以隐藏问题的复杂度，修改某一层，最多影响其相邻的两层（通常只能影响上层）

#### 层次结构
优点
* 这种风格支持基于可增加抽象层的设计，将一个复杂问题分解成一个增量步骤序列的实现

### 独立构件风格

#### 进程通讯
  远程或者一部调用等

#### 事件驱动系统（隐式调用）
按钮控件。断点调试，编辑器

#### 软件架构风格-虚拟机风格 （**关键字：自定义**）
  有没有需要自定义业务流程的场景，如：游戏自定义地图，OA自定义审批流程

* 解释器（任务持续依赖，动态调整）
  解释器通常包括一个完成解释工作的解释引擎，一个包含将被解释的代码的存储区、
一个记录引擎当前工作状态的数据结构，以及记录一个源代码被解释执行的进度的数据结构。具有解释器风格的软件
中含有一个虚拟机，可以仿真的执行过程和一些关键应用，其确定是执行效率比较低

* 基于规则的系统 （**人工智能和DSS**）
  基于规则的系统包括规则集、规则解释器、规则/数据选择器和工作内存，一般用在人工智能领域的DSS中。
  知识性质：通过历史数据进行大量分析，产生一些对决策有帮助的条款与规则。

#### 软件架构风格-仓库风格（以数据为中心的风格/数据共享风格）
* 数据库系统（DBMS）
  构件主要有两大类，一类是共享数据源，保存当前系统的数据状态；另一类是多个独立处理单元，处理单元对数据元素进行操作
  中心一个数据源，其他应用系统协作处理

* 黑板系统
  信号处理、问题规划（例子：语音处理）

* 超文本系统
  现代集成编译环境一般采用这种架构风格 隐式调用（事件驱动）


#### 软件架构风格-闭环控制架构（过程控制）

适合于嵌入式系统，涉及连续的动作状态

### 练习题目：
  1、Java 程序 "一次编写、处处运行" **虚拟机**
  2、网络中进行包的计息，先分包头，然年后进行报文解析以及后续处理 **数据流**
  3、联动机制， **隐式调用**
  4、自定义地图 **解释器**
  5、空调自动调节温度  **过程控制**
  6、语音识别系统 **黑板**
  7、漫步者机器人 **隐式调用**
  8、编译器。代码作为一个真题，依在不同的模块中传递 **顺序批处理**
  9、现代开发环境 工具间的相互 **数据共享**
  10、修改代码后，语法高亮。错误提示、程序结构更新 **隐式调用**
  11、生成符合新操作系统的代码， 功能不变接口形式发生变化 **适配**
  12、模拟操作系统 采用 ** 虚拟机**